{"version":3,"file":"exception-filters-context.js","sourceRoot":"","sources":["exception-filters-context.ts"],"names":[],"mappings":";;;AAAA,wDAAsE;AACtE,oEAA4D;AAC5D,yGAAmG;AAEnG,+EAA0E;AAE1E;;GAEG;AACH,MAAa,uBAAwB,SAAQ,0DAA0B;IACrE,YAAY,SAAwB;QAClC,KAAK,CAAC,SAAS,CAAC,CAAC;IACnB,CAAC;IAEM,MAAM,CACX,QAAgB,EAChB,QAAsD,EACtD,SAAiB;QAEjB,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;QAE/B,MAAM,gBAAgB,GAAG,IAAI,2CAAmB,EAAE,CAAC;QACnD,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAChC,QAAQ,EACR,QAAQ,EACR,sCAA0B,CAC3B,CAAC;QACF,IAAI,IAAA,sBAAO,EAAC,OAAO,CAAC,EAAE;YACpB,OAAO,gBAAgB,CAAC;SACzB;QACD,gBAAgB,CAAC,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;QACrD,OAAO,gBAAgB,CAAC;IAC1B,CAAC;IAEM,iBAAiB;QACtB,OAAO,EAAO,CAAC;IACjB,CAAC;CACF;AA5BD,0DA4BC","sourcesContent":["import { EXCEPTION_FILTERS_METADATA } from '@nestjs/common/constants';\r\nimport { isEmpty } from '@nestjs/common/utils/shared.utils';\r\nimport { BaseExceptionFilterContext } from '@nestjs/core/exceptions/base-exception-filter-context';\r\nimport { NestContainer } from '@nestjs/core/injector/container';\r\nimport { WsExceptionsHandler } from '../exceptions/ws-exceptions-handler';\r\n\r\n/**\r\n * @publicApi\r\n */\r\nexport class ExceptionFiltersContext extends BaseExceptionFilterContext {\r\n  constructor(container: NestContainer) {\r\n    super(container);\r\n  }\r\n\r\n  public create(\r\n    instance: object,\r\n    callback: <TClient>(client: TClient, data: any) => any,\r\n    moduleKey: string,\r\n  ): WsExceptionsHandler {\r\n    this.moduleContext = moduleKey;\r\n\r\n    const exceptionHandler = new WsExceptionsHandler();\r\n    const filters = this.createContext(\r\n      instance,\r\n      callback,\r\n      EXCEPTION_FILTERS_METADATA,\r\n    );\r\n    if (isEmpty(filters)) {\r\n      return exceptionHandler;\r\n    }\r\n    exceptionHandler.setCustomFilters(filters.reverse());\r\n    return exceptionHandler;\r\n  }\r\n\r\n  public getGlobalMetadata<T extends any[]>(): T {\r\n    return [] as T;\r\n  }\r\n}\r\n"]}