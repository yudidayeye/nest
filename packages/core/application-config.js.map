{"version":3,"file":"application-config.js","sourceRoot":"D:/04-learn-font/learn-node/nest/packages/core/","sources":["application-config.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  CanActivate,\r\n  ExceptionFilter,\r\n  NestInterceptor,\r\n  PipeTransform,\r\n  VersioningOptions,\r\n  WebSocketAdapter,\r\n} from '@nestjs/common';\r\nimport { GlobalPrefixOptions } from '@nestjs/common/interfaces';\r\nimport { InstanceWrapper } from './injector/instance-wrapper';\r\nimport { ExcludeRouteMetadata } from './router/interfaces/exclude-route-metadata.interface';\r\n\r\nexport class ApplicationConfig {\r\n  private globalPrefix = '';\r\n  private globalPrefixOptions: GlobalPrefixOptions<ExcludeRouteMetadata> = {};\r\n  private globalPipes: Array<PipeTransform> = [];\r\n  private globalFilters: Array<ExceptionFilter> = [];\r\n  private globalInterceptors: Array<NestInterceptor> = [];\r\n  private globalGuards: Array<CanActivate> = [];\r\n  private versioningOptions: VersioningOptions;\r\n  private readonly globalRequestPipes: InstanceWrapper<PipeTransform>[] = [];\r\n  private readonly globalRequestFilters: InstanceWrapper<ExceptionFilter>[] =\r\n    [];\r\n  private readonly globalRequestInterceptors: InstanceWrapper<NestInterceptor>[] =\r\n    [];\r\n  private readonly globalRequestGuards: InstanceWrapper<CanActivate>[] = [];\r\n\r\n  constructor(private ioAdapter: WebSocketAdapter | null = null) {}\r\n\r\n  public setGlobalPrefix(prefix: string) {\r\n    this.globalPrefix = prefix;\r\n  }\r\n\r\n  public getGlobalPrefix() {\r\n    return this.globalPrefix;\r\n  }\r\n\r\n  public setGlobalPrefixOptions(\r\n    options: GlobalPrefixOptions<ExcludeRouteMetadata>,\r\n  ) {\r\n    this.globalPrefixOptions = options;\r\n  }\r\n\r\n  public getGlobalPrefixOptions(): GlobalPrefixOptions<ExcludeRouteMetadata> {\r\n    return this.globalPrefixOptions;\r\n  }\r\n\r\n  public setIoAdapter(ioAdapter: WebSocketAdapter) {\r\n    this.ioAdapter = ioAdapter;\r\n  }\r\n\r\n  public getIoAdapter(): WebSocketAdapter {\r\n    return this.ioAdapter;\r\n  }\r\n\r\n  public addGlobalPipe(pipe: PipeTransform<any>) {\r\n    this.globalPipes.push(pipe);\r\n  }\r\n\r\n  public useGlobalPipes(...pipes: PipeTransform<any>[]) {\r\n    this.globalPipes = this.globalPipes.concat(pipes);\r\n  }\r\n\r\n  public getGlobalFilters(): ExceptionFilter[] {\r\n    return this.globalFilters;\r\n  }\r\n\r\n  public addGlobalFilter(filter: ExceptionFilter) {\r\n    this.globalFilters.push(filter);\r\n  }\r\n\r\n  public useGlobalFilters(...filters: ExceptionFilter[]) {\r\n    this.globalFilters = this.globalFilters.concat(filters);\r\n  }\r\n\r\n  public getGlobalPipes(): PipeTransform<any>[] {\r\n    return this.globalPipes;\r\n  }\r\n\r\n  public getGlobalInterceptors(): NestInterceptor[] {\r\n    return this.globalInterceptors;\r\n  }\r\n\r\n  public addGlobalInterceptor(interceptor: NestInterceptor) {\r\n    this.globalInterceptors.push(interceptor);\r\n  }\r\n\r\n  public useGlobalInterceptors(...interceptors: NestInterceptor[]) {\r\n    this.globalInterceptors = this.globalInterceptors.concat(interceptors);\r\n  }\r\n\r\n  public getGlobalGuards(): CanActivate[] {\r\n    return this.globalGuards;\r\n  }\r\n\r\n  public addGlobalGuard(guard: CanActivate) {\r\n    this.globalGuards.push(guard);\r\n  }\r\n\r\n  public useGlobalGuards(...guards: CanActivate[]) {\r\n    this.globalGuards = this.globalGuards.concat(guards);\r\n  }\r\n\r\n  public addGlobalRequestInterceptor(\r\n    wrapper: InstanceWrapper<NestInterceptor>,\r\n  ) {\r\n    this.globalRequestInterceptors.push(wrapper);\r\n  }\r\n\r\n  public getGlobalRequestInterceptors(): InstanceWrapper<NestInterceptor>[] {\r\n    return this.globalRequestInterceptors;\r\n  }\r\n\r\n  public addGlobalRequestPipe(wrapper: InstanceWrapper<PipeTransform>) {\r\n    this.globalRequestPipes.push(wrapper);\r\n  }\r\n\r\n  public getGlobalRequestPipes(): InstanceWrapper<PipeTransform>[] {\r\n    return this.globalRequestPipes;\r\n  }\r\n\r\n  public addGlobalRequestFilter(wrapper: InstanceWrapper<ExceptionFilter>) {\r\n    this.globalRequestFilters.push(wrapper);\r\n  }\r\n\r\n  public getGlobalRequestFilters(): InstanceWrapper<ExceptionFilter>[] {\r\n    return this.globalRequestFilters;\r\n  }\r\n\r\n  public addGlobalRequestGuard(wrapper: InstanceWrapper<CanActivate>) {\r\n    this.globalRequestGuards.push(wrapper);\r\n  }\r\n\r\n  public getGlobalRequestGuards(): InstanceWrapper<CanActivate>[] {\r\n    return this.globalRequestGuards;\r\n  }\r\n\r\n  public enableVersioning(options: VersioningOptions): void {\r\n    if (Array.isArray(options.defaultVersion)) {\r\n      // Drop duplicated versions\r\n      options.defaultVersion = Array.from(new Set(options.defaultVersion));\r\n    }\r\n\r\n    this.versioningOptions = options;\r\n  }\r\n\r\n  public getVersioning(): VersioningOptions | undefined {\r\n    return this.versioningOptions;\r\n  }\r\n}\r\n"]}