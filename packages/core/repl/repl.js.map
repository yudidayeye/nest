{"version":3,"file":"repl.js","sourceRoot":"D:/04-learn-font/learn-node/nest/packages/core/","sources":["repl/repl.ts"],"names":[],"mappings":";;;AAAA,2CAA6D;AAC7D,0EAA2D;AAC3D,kDAA8C;AAC9C,mEAAyD;AACzD,2CAAuD;AACvD,iDAA6C;AAC7C,+CAA2C;AAC3C,iEAAqE;AAE9D,KAAK,UAAU,IAAI,CAAC,MAA4B;IACrD,MAAM,GAAG,GAAG,MAAM,0BAAW,CAAC,wBAAwB,CAAC,MAAM,EAAE;QAC7D,YAAY,EAAE,KAAK;QACnB,MAAM,EAAE,IAAI,wBAAU,EAAE;KACzB,CAAC,CAAC;IACH,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;IAEjB,MAAM,WAAW,GAAG,IAAI,0BAAW,CAAC,GAAG,CAAC,CAAC;IACzC,eAAM,CAAC,GAAG,CAAC,oCAAwB,CAAC,CAAC;IAErC,MAAM,KAAK,GAAG,2CAAa,MAAM,EAAC,CAAC;IACnC,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;QAC7B,MAAM,EAAE,qBAAG,CAAC,KAAK,CAAC,IAAI,CAAC;QACvB,eAAe,EAAE,IAAI;KACtB,CAAC,CAAC;IACH,IAAA,sCAAc,EAAC,UAAU,CAAC,OAAO,EAAE,WAAW,CAAC,WAAW,CAAC,CAAC;IAE5D,IAAA,kDAA2B,EAAC,UAAU,CAAC,CAAC;IAExC,OAAO,UAAU,CAAC;AACpB,CAAC;AApBD,oBAoBC","sourcesContent":["import { DynamicModule, Logger, Type } from '@nestjs/common';\r\nimport { clc } from '@nestjs/common/utils/cli-colors.util';\r\nimport { NestFactory } from '../nest-factory';\r\nimport { assignToObject } from './assign-to-object.util';\r\nimport { REPL_INITIALIZED_MESSAGE } from './constants';\r\nimport { ReplContext } from './repl-context';\r\nimport { ReplLogger } from './repl-logger';\r\nimport { defineDefaultCommandsOnRepl } from './repl-native-commands';\r\n\r\nexport async function repl(module: Type | DynamicModule) {\r\n  const app = await NestFactory.createApplicationContext(module, {\r\n    abortOnError: false,\r\n    logger: new ReplLogger(),\r\n  });\r\n  await app.init();\r\n\r\n  const replContext = new ReplContext(app);\r\n  Logger.log(REPL_INITIALIZED_MESSAGE);\r\n\r\n  const _repl = await import('repl');\r\n  const replServer = _repl.start({\r\n    prompt: clc.green('> '),\r\n    ignoreUndefined: true,\r\n  });\r\n  assignToObject(replServer.context, replContext.globalScope);\r\n\r\n  defineDefaultCommandsOnRepl(replServer);\r\n\r\n  return replServer;\r\n}\r\n"]}