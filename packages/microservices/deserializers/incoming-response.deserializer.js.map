{"version":3,"file":"incoming-response.deserializer.js","sourceRoot":"","sources":["incoming-response.deserializer.ts"],"names":[],"mappings":";;;AAAA,oEAAgE;AAGhE;;GAEG;AACH,MAAa,4BAA4B;IACvC,WAAW,CAAC,KAAU,EAAE,OAA6B;QACnD,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IAClE,CAAC;IAED,UAAU,CAAC,KAAU;QACnB,IAAI,CAAC,KAAK,EAAE;YACV,OAAO,IAAI,CAAC;SACb;QACD,IACE,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,GAAG,CAAC;YAC7C,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,QAAQ,CAAC;YAClD,CAAC,IAAA,0BAAW,EAAE,KAA0B,CAAC,UAAU,CAAC,EACpD;YACA,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,WAAW,CAAC,KAAU;QACpB,OAAO;YACL,EAAE,EAAE,KAAK,IAAI,KAAK,CAAC,EAAE;YACrB,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,IAAI;SACjB,CAAC;IACJ,CAAC;CACF;AA1BD,oEA0BC","sourcesContent":["import { isUndefined } from '@nestjs/common/utils/shared.utils';\r\nimport { IncomingResponse, ProducerDeserializer } from '../interfaces';\r\n\r\n/**\r\n * @publicApi\r\n */\r\nexport class IncomingResponseDeserializer implements ProducerDeserializer {\r\n  deserialize(value: any, options?: Record<string, any>): IncomingResponse {\r\n    return this.isExternal(value) ? this.mapToSchema(value) : value;\r\n  }\r\n\r\n  isExternal(value: any): boolean {\r\n    if (!value) {\r\n      return true;\r\n    }\r\n    if (\r\n      !isUndefined((value as IncomingResponse).err) ||\r\n      !isUndefined((value as IncomingResponse).response) ||\r\n      !isUndefined((value as IncomingResponse).isDisposed)\r\n    ) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  mapToSchema(value: any): IncomingResponse {\r\n    return {\r\n      id: value && value.id,\r\n      response: value,\r\n      isDisposed: true,\r\n    };\r\n  }\r\n}\r\n"]}