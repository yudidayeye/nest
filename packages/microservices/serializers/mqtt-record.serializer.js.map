{"version":3,"file":"mqtt-record.serializer.js","sourceRoot":"","sources":["mqtt-record.serializer.ts"],"names":[],"mappings":";;;AAAA,oEAA6D;AAE7D,wDAAgD;AAEhD,MAAa,oBAAoB;IAG/B,SAAS,CAAC,MAAwB;QAChC,IACE,MAAM,EAAE,IAAI;YACZ,IAAA,uBAAQ,EAAC,MAAM,CAAC,IAAI,CAAC;YACrB,MAAM,CAAC,IAAI,YAAY,4BAAU,EACjC;YACA,MAAM,MAAM,GAAG,MAAM,CAAC,IAAkB,CAAC;YACzC,OAAO;gBACL,GAAG,MAAM;gBACT,IAAI,EAAE,MAAM,CAAC,IAAI;gBACjB,OAAO,EAAE,MAAM,CAAC,OAAO;aACxB,CAAC;SACH;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AAlBD,oDAkBC","sourcesContent":["import { isObject } from '@nestjs/common/utils/shared.utils';\r\nimport { ReadPacket, Serializer } from '../interfaces';\r\nimport { MqttRecord } from '../record-builders';\r\n\r\nexport class MqttRecordSerializer\r\n  implements Serializer<ReadPacket, ReadPacket & Partial<MqttRecord>>\r\n{\r\n  serialize(packet: ReadPacket | any): ReadPacket & Partial<MqttRecord> {\r\n    if (\r\n      packet?.data &&\r\n      isObject(packet.data) &&\r\n      packet.data instanceof MqttRecord\r\n    ) {\r\n      const record = packet.data as MqttRecord;\r\n      return {\r\n        ...packet,\r\n        data: record.data,\r\n        options: record.options,\r\n      };\r\n    }\r\n    return packet;\r\n  }\r\n}\r\n"]}