{"version":3,"file":"rmq-record.serializer.js","sourceRoot":"","sources":["rmq-record.serializer.ts"],"names":[],"mappings":";;;AAAA,oEAA6D;AAG7D,wDAA+C;AAE/C,MAAa,mBAAmB;IAG9B,SAAS,CAAC,MAAwB;QAChC,IACE,MAAM,EAAE,IAAI;YACZ,IAAA,uBAAQ,EAAC,MAAM,CAAC,IAAI,CAAC;YACrB,MAAM,CAAC,IAAI,YAAY,2BAAS,EAChC;YACA,MAAM,MAAM,GAAG,MAAM,CAAC,IAAiB,CAAC;YACxC,OAAO;gBACL,GAAG,MAAM;gBACT,IAAI,EAAE,MAAM,CAAC,IAAI;gBACjB,OAAO,EAAE,MAAM,CAAC,OAAO;aACxB,CAAC;SACH;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AAlBD,kDAkBC","sourcesContent":["import { isObject } from '@nestjs/common/utils/shared.utils';\r\nimport { ReadPacket } from '../interfaces';\r\nimport { Serializer } from '../interfaces/serializer.interface';\r\nimport { RmqRecord } from '../record-builders';\r\n\r\nexport class RmqRecordSerializer\r\n  implements Serializer<ReadPacket, ReadPacket & Partial<RmqRecord>>\r\n{\r\n  serialize(packet: ReadPacket | any): ReadPacket & Partial<RmqRecord> {\r\n    if (\r\n      packet?.data &&\r\n      isObject(packet.data) &&\r\n      packet.data instanceof RmqRecord\r\n    ) {\r\n      const record = packet.data as RmqRecord;\r\n      return {\r\n        ...packet,\r\n        data: record.data,\r\n        options: record.options,\r\n      };\r\n    }\r\n    return packet;\r\n  }\r\n}\r\n"]}