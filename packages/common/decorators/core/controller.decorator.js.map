{"version":3,"file":"controller.decorator.js","sourceRoot":"","sources":["controller.decorator.ts"],"names":[],"mappings":";;;AAAA,+CAMyB;AAEzB,2DAAiE;AA4GjE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiCG;AACH,SAAgB,UAAU,CACxB,eAAuD;IAEvD,MAAM,WAAW,GAAG,GAAG,CAAC;IAExB,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,cAAc,CAAC,GAAG,IAAA,0BAAW,EAC5D,eAAe,CAChB;QACC,CAAC,CAAC,CAAC,WAAW,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;QAChD,CAAC,CAAC,IAAA,uBAAQ,EAAC,eAAe,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC;YAC7D,CAAC,CAAC,CAAC,eAAe,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;YACpD,CAAC,CAAC;gBACE,eAAe,CAAC,IAAI,IAAI,WAAW;gBACnC,eAAe,CAAC,IAAI;gBACpB,EAAE,KAAK,EAAE,eAAe,CAAC,KAAK,EAAE,OAAO,EAAE,eAAe,CAAC,OAAO,EAAE;gBAClE,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,CAAC;oBACpC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;oBAC9C,CAAC,CAAC,eAAe,CAAC,OAAO;aAC5B,CAAC;IAEN,OAAO,CAAC,MAAc,EAAE,EAAE;QACxB,OAAO,CAAC,cAAc,CAAC,gCAAoB,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QAC3D,OAAO,CAAC,cAAc,CAAC,yBAAa,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QACpD,OAAO,CAAC,cAAc,CAAC,yBAAa,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;QACpD,OAAO,CAAC,cAAc,CAAC,kCAAsB,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;QACrE,OAAO,CAAC,cAAc,CAAC,4BAAgB,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC;IACnE,CAAC,CAAC;AACJ,CAAC;AA3BD,gCA2BC","sourcesContent":["import {\r\n  CONTROLLER_WATERMARK,\r\n  HOST_METADATA,\r\n  PATH_METADATA,\r\n  SCOPE_OPTIONS_METADATA,\r\n  VERSION_METADATA,\r\n} from '../../constants';\r\nimport { ScopeOptions, VersionOptions } from '../../interfaces';\r\nimport { isString, isUndefined } from '../../utils/shared.utils';\r\n\r\n/**\r\n * Interface defining options that can be passed to `@Controller()` decorator\r\n *\r\n * @publicApi\r\n */\r\nexport interface ControllerOptions extends ScopeOptions, VersionOptions {\r\n  /**\r\n   * Specifies an optional `route path prefix`.  The prefix is pre-pended to the\r\n   * path specified in any request decorator in the class.\r\n   *\r\n   * Supported only by HTTP-based applications (does not apply to non-HTTP microservices).\r\n   *\r\n   * @see [Routing](https://docs.nestjs.com/controllers#routing)\r\n   */\r\n  path?: string | string[];\r\n\r\n  /**\r\n   * Specifies an optional HTTP Request host filter.  When configured, methods\r\n   * within the controller will only be routed if the request host matches the\r\n   * specified value.\r\n   *\r\n   * @see [Routing](https://docs.nestjs.com/controllers#routing)\r\n   */\r\n  host?: string | RegExp | Array<string | RegExp>;\r\n}\r\n\r\n/**\r\n * Decorator that marks a class as a Nest controller that can receive inbound\r\n * requests and produce responses.\r\n *\r\n * An HTTP Controller responds to inbound HTTP Requests and produces HTTP Responses.\r\n * It defines a class that provides the context for one or more related route\r\n * handlers that correspond to HTTP request methods and associated routes\r\n * for example `GET /api/profile`, `POST /users/resume`.\r\n *\r\n * A Microservice Controller responds to requests as well as events, running over\r\n * a variety of transports [(read more here)](https://docs.nestjs.com/microservices/basics).\r\n * It defines a class that provides a context for one or more message or event\r\n * handlers.\r\n *\r\n * @see [Controllers](https://docs.nestjs.com/controllers)\r\n * @see [Microservices](https://docs.nestjs.com/microservices/basics#request-response)\r\n *\r\n * @publicApi\r\n */\r\nexport function Controller(): ClassDecorator;\r\n\r\n/**\r\n * Decorator that marks a class as a Nest controller that can receive inbound\r\n * requests and produce responses.\r\n *\r\n * An HTTP Controller responds to inbound HTTP Requests and produces HTTP Responses.\r\n * It defines a class that provides the context for one or more related route\r\n * handlers that correspond to HTTP request methods and associated routes\r\n * for example `GET /api/profile`, `POST /users/resume`.\r\n *\r\n * A Microservice Controller responds to requests as well as events, running over\r\n * a variety of transports [(read more here)](https://docs.nestjs.com/microservices/basics).\r\n * It defines a class that provides a context for one or more message or event\r\n * handlers.\r\n *\r\n * @param {string|Array} prefix string that defines a `route path prefix`.  The prefix\r\n * is pre-pended to the path specified in any request decorator in the class.\r\n *\r\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\r\n * @see [Controllers](https://docs.nestjs.com/controllers)\r\n * @see [Microservices](https://docs.nestjs.com/microservices/basics#request-response)\r\n *\r\n * @publicApi\r\n */\r\nexport function Controller(prefix: string | string[]): ClassDecorator;\r\n\r\n/**\r\n * Decorator that marks a class as a Nest controller that can receive inbound\r\n * requests and produce responses.\r\n *\r\n * An HTTP Controller responds to inbound HTTP Requests and produces HTTP Responses.\r\n * It defines a class that provides the context for one or more related route\r\n * handlers that correspond to HTTP request methods and associated routes\r\n * for example `GET /api/profile`, `POST /users/resume`.\r\n *\r\n * A Microservice Controller responds to requests as well as events, running over\r\n * a variety of transports [(read more here)](https://docs.nestjs.com/microservices/basics).\r\n * It defines a class that provides a context for one or more message or event\r\n * handlers.\r\n *\r\n * @param {object} options configuration object specifying:\r\n *\r\n * - `scope` - symbol that determines the lifetime of a Controller instance.\r\n * [See Scope](https://docs.nestjs.com/fundamentals/injection-scopes#usage) for\r\n * more details.\r\n * - `prefix` - string that defines a `route path prefix`.  The prefix\r\n * is pre-pended to the path specified in any request decorator in the class.\r\n * - `version` - string, array of strings, or Symbol that defines the version\r\n * of all routes in the class. [See Versioning](https://docs.nestjs.com/techniques/versioning)\r\n * for more details.\r\n *\r\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\r\n * @see [Controllers](https://docs.nestjs.com/controllers)\r\n * @see [Microservices](https://docs.nestjs.com/microservices/basics#request-response)\r\n * @see [Versioning](https://docs.nestjs.com/techniques/versioning)\r\n *\r\n * @publicApi\r\n */\r\nexport function Controller(options: ControllerOptions): ClassDecorator;\r\n\r\n/**\r\n * Decorator that marks a class as a Nest controller that can receive inbound\r\n * requests and produce responses.\r\n *\r\n * An HTTP Controller responds to inbound HTTP Requests and produces HTTP Responses.\r\n * It defines a class that provides the context for one or more related route\r\n * handlers that correspond to HTTP request methods and associated routes\r\n * for example `GET /api/profile`, `POST /users/resume`\r\n *\r\n * A Microservice Controller responds to requests as well as events, running over\r\n * a variety of transports [(read more here)](https://docs.nestjs.com/microservices/basics).\r\n * It defines a class that provides a context for one or more message or event\r\n * handlers.\r\n *\r\n * @param prefixOrOptions a `route path prefix` or a `ControllerOptions` object.\r\n * A `route path prefix` is pre-pended to the path specified in any request decorator\r\n * in the class. `ControllerOptions` is an options configuration object specifying:\r\n * - `scope` - symbol that determines the lifetime of a Controller instance.\r\n * [See Scope](https://docs.nestjs.com/fundamentals/injection-scopes#usage) for\r\n * more details.\r\n * - `prefix` - string that defines a `route path prefix`.  The prefix\r\n * is pre-pended to the path specified in any request decorator in the class.\r\n * - `version` - string, array of strings, or Symbol that defines the version\r\n * of all routes in the class. [See Versioning](https://docs.nestjs.com/techniques/versioning)\r\n * for more details.\r\n *\r\n * @see [Routing](https://docs.nestjs.com/controllers#routing)\r\n * @see [Controllers](https://docs.nestjs.com/controllers)\r\n * @see [Microservices](https://docs.nestjs.com/microservices/basics#request-response)\r\n * @see [Scope](https://docs.nestjs.com/fundamentals/injection-scopes#usage)\r\n * @see [Versioning](https://docs.nestjs.com/techniques/versioning)\r\n *\r\n * @publicApi\r\n */\r\nexport function Controller(\r\n  prefixOrOptions?: string | string[] | ControllerOptions,\r\n): ClassDecorator {\r\n  const defaultPath = '/';\r\n\r\n  const [path, host, scopeOptions, versionOptions] = isUndefined(\r\n    prefixOrOptions,\r\n  )\r\n    ? [defaultPath, undefined, undefined, undefined]\r\n    : isString(prefixOrOptions) || Array.isArray(prefixOrOptions)\r\n    ? [prefixOrOptions, undefined, undefined, undefined]\r\n    : [\r\n        prefixOrOptions.path || defaultPath,\r\n        prefixOrOptions.host,\r\n        { scope: prefixOrOptions.scope, durable: prefixOrOptions.durable },\r\n        Array.isArray(prefixOrOptions.version)\r\n          ? Array.from(new Set(prefixOrOptions.version))\r\n          : prefixOrOptions.version,\r\n      ];\r\n\r\n  return (target: object) => {\r\n    Reflect.defineMetadata(CONTROLLER_WATERMARK, true, target);\r\n    Reflect.defineMetadata(PATH_METADATA, path, target);\r\n    Reflect.defineMetadata(HOST_METADATA, host, target);\r\n    Reflect.defineMetadata(SCOPE_OPTIONS_METADATA, scopeOptions, target);\r\n    Reflect.defineMetadata(VERSION_METADATA, versionOptions, target);\r\n  };\r\n}\r\n"]}