{"version":3,"file":"multer.utils.js","sourceRoot":"","sources":["multer.utils.ts"],"names":[],"mappings":";;;AAAA,2CAIwB;AACxB,yDAAwE;AAExE,SAAgB,kBAAkB,CAAC,KAAwB;IACzD,IAAI,CAAC,KAAK,IAAI,KAAK,YAAY,sBAAa,EAAE;QAC5C,OAAO,KAAK,CAAC;KACd;IACD,QAAQ,KAAK,CAAC,OAAO,EAAE;QACrB,KAAK,mCAAgB,CAAC,eAAe;YACnC,OAAO,IAAI,iCAAwB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACrD,KAAK,mCAAgB,CAAC,gBAAgB,CAAC;QACvC,KAAK,mCAAgB,CAAC,eAAe,CAAC;QACtC,KAAK,mCAAgB,CAAC,iBAAiB,CAAC;QACxC,KAAK,mCAAgB,CAAC,iBAAiB,CAAC;QACxC,KAAK,mCAAgB,CAAC,qBAAqB,CAAC;QAC5C,KAAK,mCAAgB,CAAC,gBAAgB,CAAC;QACvC,KAAK,mCAAgB,CAAC,kBAAkB;YACtC,OAAO,IAAI,4BAAmB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAChD,KAAK,mCAAgB,CAAC,4BAA4B;YAChD,OAAO,IAAI,4BAAmB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAChD,KAAK,mCAAgB,CAAC,+BAA+B,CAAC;QACtD,KAAK,mCAAgB,CAAC,gCAAgC,CAAC;QACvD,KAAK,mCAAgB,CAAC,gCAAgC;YACpD,OAAO,IAAI,4BAAmB,CAAC,cAAc,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;KACjE;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAvBD,gDAuBC","sourcesContent":["import {\r\n  BadRequestException,\r\n  HttpException,\r\n  PayloadTooLargeException,\r\n} from '@nestjs/common';\r\nimport { multerExceptions, busboyExceptions } from './multer.constants';\r\n\r\nexport function transformException(error: Error | undefined) {\r\n  if (!error || error instanceof HttpException) {\r\n    return error;\r\n  }\r\n  switch (error.message) {\r\n    case multerExceptions.LIMIT_FILE_SIZE:\r\n      return new PayloadTooLargeException(error.message);\r\n    case multerExceptions.LIMIT_FILE_COUNT:\r\n    case multerExceptions.LIMIT_FIELD_KEY:\r\n    case multerExceptions.LIMIT_FIELD_VALUE:\r\n    case multerExceptions.LIMIT_FIELD_COUNT:\r\n    case multerExceptions.LIMIT_UNEXPECTED_FILE:\r\n    case multerExceptions.LIMIT_PART_COUNT:\r\n    case multerExceptions.MISSING_FIELD_NAME:\r\n      return new BadRequestException(error.message);\r\n    case busboyExceptions.MULTIPART_BOUNDARY_NOT_FOUND:\r\n      return new BadRequestException(error.message);\r\n    case busboyExceptions.MULTIPART_MALFORMED_PART_HEADER:\r\n    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FORM:\r\n    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FILE:\r\n      return new BadRequestException(`Multipart: ${error.message}`);\r\n  }\r\n  return error;\r\n}\r\n"]}